controllers:
  main:
    containers:
      main:
        env:
          - name: REDIS_HOSTNAME
            value: '{{ printf "%s-valkey" .Release.Name }}'
          - name: IMMICH_MACHINE_LEARNING_URL
            value: '{{ printf "http://%s-machine-learning:3003" .Release.Name }}'
          - name: DB_URL
            valueFrom:
              secretKeyRef:
                name: db-url
                key: DB_URL
          - name: DB_VECTOR_EXTENSION
            value: vectorchord
          - name: DB_STORAGE_TYPE
            value: SSD

immich:
  library:
    existingClaim: immich-media-pvc

persistence:
  cache:
    storageClass: local-path

valkey:
  enabled: true
  persistence:
    storageClass: local-path
